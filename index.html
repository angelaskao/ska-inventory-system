<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKA Telescope Inventory Management System</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- QR Code Scanner Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #f8f9fa;
        }
        
        .inventory-container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
        }
        
        @media print {
            .no-print { display: none !important; }
            body { background: white !important; }
        }
        
        @media (max-width: 768px) {
            .inventory-container { padding: 10px; }
            .mobile-stack { flex-direction: column !important; }
        }
        
        .ska-primary { background-color: #0078d4; }
        .ska-primary:hover { background-color: #106ebe; }
        .ska-secondary { background-color: #f3f2f1; }
        .ska-text { color: #323130; }
        .ska-text-secondary { color: #605e5c; }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .scanner-container {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        #qr-reader {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .qr-scanner-active {
            border: 3px solid #0078d4;
            border-radius: 8px;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Simple SVG Icons
        const SearchIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
        );

        const PlusIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
        );

        const QrCodeIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" />
            </svg>
        );

        const EditIcon = () => (
            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
            </svg>
        );

        const DeleteIcon = () => (
            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
        );

        const XIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
            </svg>
        );

        const CameraIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
        );

        // Scanner Modal Component
        const ScannerModal = ({ isOpen, onClose, onScan }) => {
            const scannerRef = useRef(null);
            const [isScanning, setIsScanning] = useState(false);
            const [scanResult, setScanResult] = useState('');
            const [scanMethod, setScanMethod] = useState('camera'); // 'camera' or 'manual'

            useEffect(() => {
                if (isOpen && scanMethod === 'camera') {
                    startScanner();
                }
                return () => {
                    stopScanner();
                };
            }, [isOpen, scanMethod]);

            const startScanner = () => {
                if (typeof Html5Qrcode !== 'undefined') {
                    setIsScanning(true);
                    const html5QrCode = new Html5Qrcode("qr-reader");
                    scannerRef.current = html5QrCode;

                    const config = { 
                        fps: 10, 
                        qrbox: { width: 250, height: 250 },
                        aspectRatio: 1.0,
                        supportedScanTypes: [Html5QrcodeScanType.SCAN_TYPE_CAMERA]
                    };

                    html5QrCode.start(
                        { facingMode: "environment" }, // Use back camera
                        config,
                        (decodedText, decodedResult) => {
                            // Successfully scanned
                            setScanResult(decodedText);
                            onScan(decodedText);
                            stopScanner();
                        },
                        (errorMessage) => {
                            // Scanning failed, but this is normal during scanning
                            console.log(`QR Code scan error: ${errorMessage}`);
                        }
                    ).catch(err => {
                        console.log(`Unable to start scanning: ${err}`);
                        setIsScanning(false);
                        alert("‚ùå Camera access denied or not available. Please use manual entry or enable camera permissions.");
                    });
                } else {
                    alert("‚ùå QR Code scanner not available. Please try manual entry.");
                }
            };

            const stopScanner = () => {
                if (scannerRef.current && isScanning) {
                    scannerRef.current.stop().then(() => {
                        setIsScanning(false);
                    }).catch(err => {
                        console.log(`Error stopping scanner: ${err}`);
                        setIsScanning(false);
                    });
                }
            };

            const handleManualScan = () => {
                if (scanResult.trim()) {
                    onScan(scanResult);
                    setScanResult('');
                }
            };

            if (!isOpen) return null;

            return (
                <div className="modal">
                    <div className="scanner-container">
                        <div className="flex justify-between items-center mb-6">
                            <h2 className="text-2xl font-bold">üì± Scan Barcode/QR Code</h2>
                            <button onClick={onClose} className="text-gray-500 hover:text-gray-700">
                                <XIcon />
                            </button>
                        </div>

                        {/* Scanner Method Toggle */}
                        <div className="mb-6">
                            <div className="flex gap-4">
                                <button
                                    onClick={() => setScanMethod('camera')}
                                    className={`flex-1 py-3 px-4 rounded-lg font-medium flex items-center justify-center gap-2 ${
                                        scanMethod === 'camera' 
                                            ? 'bg-blue-600 text-white' 
                                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                    }`}
                                >
                                    <CameraIcon />
                                    Camera Scan
                                </button>
                                <button
                                    onClick={() => setScanMethod('manual')}
                                    className={`flex-1 py-3 px-4 rounded-lg font-medium flex items-center justify-center gap-2 ${
                                        scanMethod === 'manual' 
                                            ? 'bg-blue-600 text-white' 
                                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                    }`}
                                >
                                    <QrCodeIcon />
                                    Manual Entry
                                </button>
                            </div>
                        </div>

                        {scanMethod === 'camera' ? (
                            <div>
                                <div id="qr-reader" className={isScanning ? 'qr-scanner-active' : ''}></div>
                                {isScanning && (
                                    <div className="mt-4 text-center">
                                        <p className="text-sm text-gray-600 mb-4">
                                            üì∑ Point your camera at a barcode or QR code
                                        </p>
                                        <button
                                            onClick={() => {
                                                stopScanner();
                                                onClose();
                                            }}
                                            className="px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600"
                                        >
                                            Stop Scanning
                                        </button>
                                    </div>
                                )}
                                {!isScanning && (
                                    <div className="mt-4 text-center">
                                        <button
                                            onClick={startScanner}
                                            className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 mx-auto"
                                        >
                                            <CameraIcon />
                                            Start Camera
                                        </button>
                                    </div>
                                )}
                            </div>
                        ) : (
                            <div>
                                <label className="block text-sm font-medium mb-2">Enter Barcode/QR Code:</label>
                                <input
                                    type="text"
                                    value={scanResult}
                                    onChange={(e) => setScanResult(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleManualScan()}
                                    placeholder="Type or paste barcode/QR code here..."
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 mb-4"
                                    autoFocus
                                />
                                <button
                                    onClick={handleManualScan}
                                    disabled={!scanResult.trim()}
                                    className="w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
                                >
                                    Use This Code
                                </button>
                            </div>
                        )}

                        <div className="mt-6 p-4 bg-blue-50 rounded-lg">
                            <h3 className="font-semibold text-blue-900 mb-2">üí° Tips:</h3>
                            <ul className="text-sm text-blue-800 space-y-1">
                                <li>‚Ä¢ Hold the camera steady over the code</li>
                                <li>‚Ä¢ Ensure good lighting</li>
                                <li>‚Ä¢ Try manual entry if camera doesn't work</li>
                                <li>‚Ä¢ Most barcode formats are supported</li>
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        // Add Item Modal Component (Enhanced with Scanner Integration)
        const AddItemModal = ({ isOpen, onClose, onSave, locations, scannedCode }) => {
            const [formData, setFormData] = useState({
                name: '',
                partNumber: '',
                location: '',
                quantity: '',
                minQuantity: '',
                category: '',
                vendor: '',
                criticality: 'Medium'
            });

            // Auto-populate part number if scanned
            useEffect(() => {
                if (scannedCode) {
                    setFormData(prev => ({
                        ...prev,
                        partNumber: scannedCode,
                        name: scannedCode.startsWith('SKA') ? `SKA Component ${scannedCode}` : `Item ${scannedCode}`
                    }));
                }
            }, [scannedCode]);

            const handleSubmit = (e) => {
                e.preventDefault();
                const newItem = {
                    ...formData,
                    id: Date.now(),
                    quantity: parseInt(formData.quantity),
                    minQuantity: parseInt(formData.minQuantity),
                    lastUpdated: new Date().toISOString().split('T')[0],
                    nextMaintenance: new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                };
                onSave(newItem);
                setFormData({
                    name: '',
                    partNumber: '',
                    location: '',
                    quantity: '',
                    minQuantity: '',
                    category: '',
                    vendor: '',
                    criticality: 'Medium'
                });
                onClose();
            };

            if (!isOpen) return null;

            return (
                <div className="modal">
                    <div className="modal-content">
                        <div className="flex justify-between items-center mb-6">
                            <h2 className="text-2xl font-bold">
                                {scannedCode ? 'üì± Scanned Item Details' : 'Add New Inventory Item'}
                            </h2>
                            <button onClick={onClose} className="text-gray-500 hover:text-gray-700">
                                <XIcon />
                            </button>
                        </div>

                        {scannedCode && (
                            <div className="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg">
                                <div className="flex items-center gap-2 mb-2">
                                    <QrCodeIcon />
                                    <span className="font-semibold text-green-800">Scanned Code:</span>
                                </div>
                                <code className="text-green-700 bg-green-100 px-2 py-1 rounded">{scannedCode}</code>
                                <p className="text-sm text-green-600 mt-2">Part number has been auto-filled. Please complete the remaining details.</p>
                            </div>
                        )}
                        
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-medium mb-2">Item Name *</label>
                                    <input
                                        type="text"
                                        required
                                        value={formData.name}
                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        placeholder="e.g., GPS Timing Module"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium mb-2">Part Number *</label>
                                    <input
                                        type="text"
                                        required
                                        value={formData.partNumber}
                                        onChange={(e) => setFormData({...formData, partNumber: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        placeholder="e.g., GPS-TIM-PPS-001"
                                        style={scannedCode ? {backgroundColor: '#f0f9ff'} : {}}
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium mb-2">Location *</label>
                                    <select
                                        required
                                        value={formData.location}
                                        onChange={(e) => setFormData({...formData, location: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                        <option value="">Select Location</option>
                                        {locations.map(loc => (
                                            <option key={loc.id} value={loc.id}>{loc.name}</option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium mb-2">Category *</label>
                                    <select
                                        required
                                        value={formData.category}
                                        onChange={(e) => setFormData({...formData, category: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                        <option value="">Select Category</option>
                                        <option value="Telescope Hardware">Telescope Hardware</option>
                                        <option value="Electronics">Electronics</option>
                                        <option value="Power">Power</option>
                                        <option value="Cables">Cables</option>
                                        <option value="Test Equipment">Test Equipment</option>
                                        <option value="Tools">Tools</option>
                                        <option value="Network">Network</option>
                                        <option value="Cooling">Cooling</option>
                                        <option value="Enclosures">Enclosures</option>
                                        <option value="Protection">Protection</option>
                                        <option value="Timing">Timing</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium mb-2">Quantity *</label>
                                    <input
                                        type="number"
                                        required
                                        min="0"
                                        value={formData.quantity}
                                        onChange={(e) => setFormData({...formData, quantity: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        placeholder="0"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium mb-2">Min Quantity *</label>
                                    <input
                                        type="number"
                                        required
                                        min="0"
                                        value={formData.minQuantity}
                                        onChange={(e) => setFormData({...formData, minQuantity: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        placeholder="0"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium mb-2">Vendor *</label>
                                    <input
                                        type="text"
                                        required
                                        value={formData.vendor}
                                        onChange={(e) => setFormData({...formData, vendor: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        placeholder="e.g., Precision Timing Inc"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium mb-2">Criticality</label>
                                    <select
                                        value={formData.criticality}
                                        onChange={(e) => setFormData({...formData, criticality: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                        <option value="Low">Low</option>
                                        <option value="Medium">Medium</option>
                                        <option value="High">High</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div className="flex gap-4 pt-6">
                                <button
                                    type="submit"
                                    className="flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 flex items-center justify-center gap-2"
                                >
                                    <PlusIcon />
                                    Add Item
                                </button>
                                <button
                                    type="button"
                                    onClick={onClose}
                                    className="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-400"
                                >
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        const SKAInventorySystem = () => {
            const [searchQuery, setSearchQuery] = useState('');
            const [selectedLocation, setSelectedLocation] = useState('all');
            const [inventoryData, setInventoryData] = useState([]);
            const [locations, setLocations] = useState([]);
            const [aiResponse, setAiResponse] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [lastSync, setLastSync] = useState('');
            const [showAddModal, setShowAddModal] = useState(false);
            const [showScannerModal, setShowScannerModal] = useState(false);
            const [scannedCode, setScannedCode] = useState('');

            useEffect(() => {
                setLastSync(new Date().toLocaleString());

                const sampleLocations = [
                    { id: 'cpf-core', name: 'CPF Core Facility', type: 'cpf', address: 'Central Processing Facility - Core Area' },
                    { id: 'cpf-warehouse', name: 'CPF Main Warehouse', type: 'central', address: 'Main Distribution Hub - Murchison' },
                    { id: 'rpf-s8', name: 'RPF S8 Station', type: 'rpf', address: 'Southern Arm - FS345-350 Cluster' },
                    { id: 'rpf-n8', name: 'RPF N8 Station', type: 'rpf', address: 'Northern Arm - FS375-378 Cluster' },
                    { id: 'in-town', name: 'Geraldton Supply Depot', type: 'in-town', address: 'Urban Distribution Center - Geraldton' }
                ];

                const sampleInventory = [
                    { id: 1, name: 'LFAA Tile Scanner Test', partNumber: 'SKA-SCAN-001', location: 'cpf-core', quantity: 5, minQuantity: 2, category: 'Telescope Hardware', vendor: 'LFAA Systems', lastUpdated: '2025-06-25', criticality: 'High' },
                    { id: 2, name: 'QR Test Component', partNumber: 'QR-TEST-123', location: 'cpf-warehouse', quantity: 3, minQuantity: 1, category: 'Electronics', vendor: 'Test Corp', lastUpdated: '2025-06-24', criticality: 'Medium' }
                ];

                setLocations(sampleLocations);
                setInventoryData(sampleInventory);
            }, []);

            const handleScan = (code) => {
                setScannedCode(code);
                setShowScannerModal(false);
                setShowAddModal(true);
            };

            const handleAddItem = (newItem) => {
                setInventoryData([...inventoryData, newItem]);
                setScannedCode('');
                alert('‚úÖ Item added successfully!');
            };

            const handleEditItem = (itemId) => {
                const item = inventoryData.find(i => i.id === itemId);
                if (item) {
                    const newQuantity = prompt(`Edit quantity for ${item.name}:`, item.quantity);
                    if (newQuantity !== null && !isNaN(newQuantity)) {
                        setInventoryData(inventoryData.map(i => 
                            i.id === itemId 
                                ? {...i, quantity: parseInt(newQuantity), lastUpdated: new Date().toISOString().split('T')[0]}
                                : i
                        ));
                        alert('‚úÖ Item updated successfully!');
                    }
                }
            };

            const handleDeleteItem = (itemId) => {
                const item = inventoryData.find(i => i.id === itemId);
                if (item && confirm(`Are you sure you want to delete "${item.name}"?`)) {
                    setInventoryData(inventoryData.filter(i => i.id !== itemId));
                    alert('‚úÖ Item deleted successfully!');
                }
            };

            const filteredInventory = inventoryData.filter(item => {
                const matchesSearch = item.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                     item.partNumber.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                     item.category.toLowerCase().includes(searchQuery.toLowerCase());
                const matchesLocation = selectedLocation === 'all' || item.location === selectedLocation;
                return matchesSearch && matchesLocation;
            });

            return (
                <div className="inventory-container">
                    {/* Header */}
                    <div className="mb-8">
                        <div className="flex flex-col md:flex-row md:items-center md:justify-between mb-4">
                            <div>
                                <h1 className="text-4xl font-bold ska-text mb-2">üì± SKA Inventory with Scanner</h1>
                                <p className="ska-text-secondary text-lg">{`Barcode/QR Scanner Enabled | Last sync: ${lastSync}`}</p>
                            </div>
                            <div className="flex gap-3 no-print mt-4 md:mt-0">
                                <button
                                    onClick={() => setShowScannerModal(true)}
                                    className="px-6 py-3 ska-primary text-white rounded-lg font-medium hover:bg-blue-700 flex items-center gap-2"
                                >
                                    <QrCodeIcon />
                                    Scan Item
                                </button>
                                <button
                                    onClick={() => {
                                        setScannedCode('');
                                        setShowAddModal(true);
                                    }}
                                    className="px-6 py-3 border border-blue-600 text-blue-600 rounded-lg font-medium hover:bg-blue-50 flex items-center gap-2"
                                >
                                    <PlusIcon />
                                    Manual Add
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Instructions */}
                    <div className="mb-8 p-6 bg-blue-50 border border-blue-200 rounded-lg">
                        <h2 className="text-xl font-bold text-blue-900 mb-4">üì± How to Use the Scanner</h2>
                        <div className="grid md:grid-cols-2 gap-4 text-blue-800">
                            <div>
                                <h3 className="font-semibold mb-2">üéØ Scan Method:</h3>
                                <ul className="text-sm space-y-1">
                                    <li>‚Ä¢ Click "Scan Item" button</li>
                                    <li>‚Ä¢ Allow camera permissions</li>
                                    <li>‚Ä¢ Point camera at barcode/QR code</li>
                                    <li>‚Ä¢ Form auto-fills with scanned data</li>
                                </ul>
                            </div>
                            <div>
                                <h3 className="font-semibold mb-2">üìù Manual Entry:</h3>
                                <ul className="text-sm space-y-1">
                                    <li>‚Ä¢ Click "Manual Add" for regular entry</li>
                                    <li>‚Ä¢ Or use "Manual Entry" tab in scanner</li>
                                    <li>‚Ä¢ Type/paste barcode manually</li>
                                    <li>‚Ä¢ Works on devices without camera</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    {/* Test Codes */}
                    <div className="mb-8 p-6 bg-green-50 border border-green-200 rounded-lg">
                        <h3 className="font-bold text-green-900 mb-3">üß™ Test the Scanner with These Codes:</h3>
                        <div className="grid md:grid-cols-3 gap-4">
                            <div className="bg-white p-3 rounded border">
                                <code className="text-sm text-green-700">SKA-TEST-001</code>
                                <p className="text-xs text-green-600 mt-1">SKA Component</p>
                            </div>
                            <div className="bg-white p-3 rounded border">
                                <code className="text-sm text-green-700">LFAA-TILE-999</code>
                                <p className="text-xs text-green-600 mt-1">LFAA Tile</p>
                            </div>
                            <div className="bg-white p-3 rounded border">
                                <code className="text-sm text-green-700">123456789</code>
                                <p className="text-xs text-green-600 mt-1">Generic Barcode</p>
                            </div>
                        </div>
                        <p className="text-sm text-green-600 mt-3">üí° Copy these codes and paste them in "Manual Entry" to test the scanner functionality!</p>
                    </div>

                    {/* Stats Dashboard */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500">
                            <h3 className="font-bold text-gray-800 mb-2">Total Items</h3>
                            <p className="text-3xl font-bold text-blue-600">{inventoryData.reduce((sum, item) => sum + item.quantity, 0)}</p>
                        </div>
                        <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500">
                            <h3 className="font-bold text-gray-800 mb-2">Total Products</h3>
                            <p className="text-3xl font-bold text-green-600">{inventoryData.length}</p>
                        </div>
                        <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500">
                            <h3 className="font-bold text-gray-800 mb-2">Locations</h3>
                            <p className="text-3xl font-bold text-purple-600">{locations.length}</p>
                        </div>
                    </div>

                    {/* Inventory Table */}
                    <div className="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div className="px-8 py-6 border-b border-gray-200">
                            <h2 className="text-2xl font-bold">Scanned Inventory Items</h2>
                            <p className="text-gray-600 mt-1">{`Showing ${filteredInventory.length} items`}</p>
                        </div>
                        <div className="overflow-x-auto">
                            <table className="min-w-full divide-y divide-gray-200">
                                <thead className="bg-gray-50">
                                    <tr>
                                        <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase">Item Details</th>
                                        <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase">Location</th>
                                        <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase">Quantity</th>
                                        <th className="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-gray-200">
                                    {filteredInventory.map((item) => {
                                        const location = locations.find(loc => loc.id === item.location);
                                        return (
                                            <tr key={item.id} className="hover:bg-gray-50">
                                                <td className="px-6 py-4">
                                                    <div>
                                                        <div className="font-semibold">{item.name}</div>
                                                        <div className="text-sm text-gray-600">{item.partNumber}</div>
                                                        <div className="text-xs text-gray-400">{item.category}</div>
                                                    </div>
                                                </td>
                                                <td className="px-6 py-4">
                                                    <div className="text-sm font-medium">{location?.name}</div>
                                                </td>
                                                <td className="px-6 py-4">
                                                    <span className="text-lg font-bold">{item.quantity}</span>
                                                    <span className="text-sm text-gray-500 ml-2">units</span>
                                                </td>
                                                <td className="px-6 py-4">
                                                    <div className="flex gap-2">
                                                        <button
                                                            onClick={() => handleEditItem(item.id)}
                                                            className="p-2 text-blue-600 hover:bg-blue-50 rounded"
                                                        >
                                                            <EditIcon />
                                                        </button>
                                                        <button
                                                            onClick={() => handleDeleteItem(item.id)}
                                                            className="p-2 text-red-600 hover:bg-red-50 rounded"
                                                        >
                                                            <DeleteIcon />
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        );
                                    })}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    {/* Scanner Modal */}
                    <ScannerModal 
                        isOpen={showScannerModal}
                        onClose={() => setShowScannerModal(false)}
                        onScan={handleScan}
                    />

                    {/* Add Item Modal */}
                    <AddItemModal 
                        isOpen={showAddModal}
                        onClose={() => {
                            setShowAddModal(false);
                            setScannedCode('');
                        }}
                        onSave={handleAddItem}
                        locations={locations}
                        scannedCode={scannedCode}
                    />
                </div>
            );
        };

        ReactDOM.render(<SKAInventorySystem />, document.getElementById('root'));
    </script>
</body>
</html>
